<div class="container">

<!-- Card of the Material -->
  <div class="card card-m mt-3">
    <% if @material.photo.attached? %>
      <%= cl_image_tag @material.photo.key, crop: :fill, class: "mr-3" %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1536939459926-301728717817?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
    <% end %>
    <div class="card-body">
        <span class="badge badge-primary badge-pill"><%= @material.category %></span>
        <section>
          <div class="d-flex justify-content-between">
            <h6><%= @material.name %></h6>
            <%= link_to ' ', edit_material_path(@material), class: "fas fa-edit ml-3" %>
          </div>
          <p><%= @material.description %></p>
        </section>
    </div>
  </div>

<!-- Main Action -->
  <div class="d-flex justify-content-between mb-3">
    <%= link_to 'back', materials_path, class: "btn btn-secondary rounded-pill d-block mt-3 plastroc-button plastroc-light-shadow" %>
    <%= link_to 'add instruction', new_material_instruction_path(@material), class: "btn btn-primary rounded-pill d-block mt-3 plastroc-button plastroc-light-shadow" %>
  </div>

  <ul class="list-group mb-3">
    <% @material.instructions.order(:step_order).each do |instruction| %>
      <%= link_to edit_material_instruction_path(@material, instruction), class: 'text-decoration-none' do %>
        <div class="d-flex flex-row card card-s">
          <% if instruction.media.attached? %>
            <%= cl_image_tag instruction.media.key, class: "mr-3" %>
          <% else %>
            <img src="https://images.unsplash.com/photo-1536939459926-301728717817?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
          <% end %>
          <section class="w-100">
            <div class="d-flex justify-content-between align-items-center w-100">
              <h6 style='color: grey'><%= instruction.title %></h6>
              <span class="badge badge-secondary badge-pill mb-2"><%= instruction.step_order %></span>
            </div>
            <div style='color: grey; max-width: 230px' class='d-inline-block text-truncate'>
              <%= instruction.rich_content %>
            </div>
          </section>
        </div>
      <% end %>
    <% end %>
  </ul>
</div>
